source ~/etc/vim/bundles.vim

set ttyfast

set modelines=5

" set autoindent           " keep cursor in the same column on cr
set encoding=utf8     " utf is default
set fileencodings=utf-8,cp1251 " detect cp1251 if possible

" Not sure about the difference of these options.
set tabstop=4
set shiftwidth=4
set softtabstop=4

set backspace=indent,eol,start " allow backspace everywhere

" Spaces instead of tabs.
set expandtab

au FileType make setlocal noexpandtab
au FileType html setlocal ts=2 sw=2 sts=2

" Highlight trailing tabs and spaces.
set list
set listchars=tab:↣⇢,trail:·

set scrolloff=3         " going to try it for some time and see if I like it

set hlsearch            " highlight all search results
set incsearch           " incremental search

set gdefault    " s///g by default

set ruler                   " useful info at the bottom of the screen
set laststatus=2            " even if only one file is open

""" I'd like to use this feature, but many people don't comply to 80-columns
""" limit, and it gets too annoying
"if exists('+colorcolumn')
"  set colorcolumn=80 " long lines are evil
"else
"  au BufWinEnter * let w:m2=matchadd('ErrorMsg', '\%>80v.\+', -1)
"endif

set history=50         " increase command history buffer
set showcmd

set wrap

" Smart indentation of { and }.
" set smartindent <--- why is this commented? arrgh, my indentation settings are messed up.
" ...but disable indentation of comments.
inoremap # X#

set visualbell          " don't beep!
set wildmenu            " improved file select menu
set wildmode=list:longest " consistent with bash

set background=light
colorscheme my

" Easier to type than default '\'.
let mapleader = ","
let maplocalleader = ","

" Disable search highlight.
map <F2> :nohlsearch<CR>

" Toggle visibility of tabs and spaces.
map <F3> :set list!<CR>
" I switched off 'use all F* keys as standard function keys' setting on my Mac
" recently, so hitting F3 is now less convenient
map <LocalLeader><Tab> :set list!<CR>

" Switch encoding.
" I rarely use it these days.
map <F5> :e ++enc=cp1251<CR>
map <F6> :e ++enc=utf-8<CR>
map <F7> :e ++enc=koi8-r<CR>

" Disable Ex mode - I never use it.
" See also: http://stackoverflow.com/questions/1269689/to-disable-entering-ex-mode-in-vim
map Q <Nop>

" toggle 'set paste'
set pastetoggle=<F8>

" delete all trailing spaces
nnoremap <LocalLeader><Space> :%s/\s\+$//<CR>

" insert current date
:nnoremap <LocalLeader>d "=strftime("(%d %b %Y)")<CR>Pbb~f)a<CR><CR><Esc>k

" lookup using Dash.app
:nnoremap <LocalLeader>, :Dash<CR>

set directory=~/tmp/vim//

" Highlight 'git commit' contents.
autocmd BufNewFile,BufRead COMMIT_EDITMSG set filetype=gitcommit


autocmd Filetype html,xml,xsl source ~/etc/vim/bundle/closetag.vim/plugin/closetag.vim

syntax on

" gx opens urls with '?' and '&'.
set isfname+=?,&

source ~/etc/vim/perl.vim
source ~/etc/vim/ruby.vim
source ~/etc/vim/markdown.vim

""""""""""""""""" TODO """""""""""""""
" set hidden?
