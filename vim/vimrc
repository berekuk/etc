source ~/etc/vim/bundles.vim

set ttyfast

" disable modeline - they cause security issues
set modelines=5
"set nomodeline

set autoindent           " keep cursor in the same column on cr
set encoding=utf8     " utf is default
set fileencodings=utf-8,cp1251 " detect cp1251 if possible

" not sure about the difference of these options
set tabstop=4
set shiftwidth=4
set softtabstop=4

set backspace=indent,eol,start " allow backspace everywhere

" spaces instead of tabs
set expandtab

au FileType make setlocal noexpandtab
au FileType html setlocal ts=2 sw=2 sts=2

" highlight trailing tabs and spaces
set list
set listchars=tab:↣⇢,trail:·

set scrolloff=3     " going to try it for some time and see if I like it

set hlsearch             " highlight all search results
set incsearch           " incremental search

set gdefault    " s///g by default

set ruler                   " useful info at the bottom of the screen
set laststatus=2            " even if only one file is open

""" I'd like to use this feature, but many people don't comply to 80-columns
""" limit, and it gets too annoying
"if exists('+colorcolumn')
"  set colorcolumn=80 " long lines are evil
"else
"  au BufWinEnter * let w:m2=matchadd('ErrorMsg', '\%>80v.\+', -1)
"endif

set history=50         " increase command history buffer
set showcmd

set wrap

" smart indentation of { and }
set smartindent
" but disable indentation of comments
inoremap # X#

set visualbell          " don't beep!
set wildmenu            " improved file select menu
set wildmode=list:longest " consistent with bash

set background=light
colorscheme my

" easier to type than default '\'
let mapleader = ","
let maplocalleader = ","

" disable search highlight
map <F2> :nohlsearch<CR>

" toggle visibility of tabs and spaces
map <F3> :set list!<CR>
" I switched off 'use all F* keys as standard function keys' setting on my Mac
" recently, so hitting F3 is now less convenient
map <LocalLeader><Tab> :set list!<CR>

" switch encoding
map <F5> :e ++enc=cp1251<CR>
map <F6> :e ++enc=utf-8<CR>
map <F7> :e ++enc=koi8-r<CR>

" disable Ex mode - I never use it
" see also: http://stackoverflow.com/questions/1269689/to-disable-entering-ex-mode-in-vim
map Q <Nop>

" toggle 'set paste'
set pastetoggle=<F8>

" delete all trailing spaces
nnoremap <LocalLeader><Space> :%s/\s\+$//<CR>

" run current perl test
nnoremap <LocalLeader>t :!prove -v %<CR>

" search for modules in ./lib on 'gf'
set path+=lib

" highlight 'git commit' contents
autocmd BufNewFile,BufRead COMMIT_EDITMSG set filetype=gitcommit

" .txt files are markdown by default
autocmd BufNewFile,BufRead *.txt set filetype=markdown

autocmd Filetype html,xml,xsl source ~/etc/vim/bundle/closetag.vim/plugin/closetag.vim

syntax on

""""""""""""""""" TODO """""""""""""""
" set hidden?
" set cursorline?
